
<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Проверка номера</title>
  <style>
    /* Простые стили для формы */
    body { font-family: Arial, sans-serif; margin: 20px; }
    form { max-width: 400px; margin: 0 auto; }
    input, button { display: block; margin: 10px 0; padding: 8px; width: 100%; }
    #result { margin-top: 20px; font-weight: bold; color: green; }
  </style>
</head>
<body>
  <h1>Проверка оператора по номеру</h1>
  <form id="phoneForm">
    <label for="phone">Введите номер телефона (например, 79001234567):</label>
    <input type="tel" id="phone" name="phone" placeholder="79001234567" required>
    <button type="submit">Проверить</button>
  </form>
  <div id="result"></div>

  <script>
    // Функция для проверки по API
    async function checkOperator(phoneNumber) {
      const resultDiv = document.getElementById('result');
      resultDiv.innerText = 'Проверяю...';
      resultDiv.style.color = 'blue';

      if (!phoneNumber || phoneNumber.length < 10) {
        resultDiv.innerText = 'Номер слишком короткий.';
        resultDiv.style.color = 'red';
        return;
      }

      const url = `https://num.voxlink.ru/get/?num=${encodeURIComponent(phoneNumber)}`;

      try {
        const response = await fetch(url);
        if (!response.ok) throw new Error(`Ошибка: ${response.status}`);

        const data = await response.text(); // Или response.json(), если JSON
        console.log('Ответ от API:', data);

        // Проверяем на "Билайн" (без учёта регистра)
        if (data.toLowerCase().includes('билайн')) {
          resultDiv.innerText = `Для номера ${phoneNumber}: Найден "Билайн"! Открываю ya.ru...`;
          resultDiv.style.color = 'green';
          // Открытие ссылки (как в твоём запросе)
          window.open('https://ya.ru/?phone=' + encodeURIComponent(phoneNumber), '_blank');
        } else {
          resultDiv.innerText = `Для номера ${phoneNumber}: "Билайн" не найден.`;
          resultDiv.style.color = 'orange';
        }
      } catch (error) {
        console.error('Ошибка запроса:', error);
        resultDiv.innerText = `Ошибка загрузки: ${error.message}. Попробуй ещё раз или включи VPN (возможно, CORS).`;
        resultDiv.style.color = 'red';
      }
    }

    // Слушатель на submit формы
    document.getElementById('phoneForm').addEventListener('submit', (e) => {
      e.preventDefault(); // Предотвратить перезагрузку страницы
      const phone = document.getElementById('phone').value.trim();
      checkOperator(phone);
    });
  </script>
</body>
</html>




